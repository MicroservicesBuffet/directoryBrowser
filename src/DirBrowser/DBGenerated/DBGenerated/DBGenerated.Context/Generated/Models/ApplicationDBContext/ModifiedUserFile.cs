//this was autogenerated by a tool. Do not modify! Use partial
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;
using Microsoft.EntityFrameworkCore;

namespace Generated;

[PrimaryKey("IDUser", "IDFile", "ModifiedDate")]
public partial class SearchModifiedUserFile:  GeneratorFromDB.Search<eModifiedUserFileColumns,ModifiedUserFile>
{
    //private ApplicationDBContext _context;
    //public SearchModifiedUserFile(ApplicationDBContext context){
    //    _context= context;
    //}
public static SearchModifiedUserFile FromSearch(GeneratorFromDB.SearchCriteria sc, eModifiedUserFileColumns colToSearch, string value)
    {
        var search = new SearchModifiedUserFile();
        var orderBy = new GeneratorFromDB.OrderBy<eModifiedUserFileColumns>();
                    orderBy.FieldName = colToSearch;
        
        orderBy.Asc = false;
        search.OrderBys = new[] { orderBy };
        search.PageNumber = 1;
        search.PageSize = int.MaxValue - 1;
        var s = new GeneratorFromDB.SearchField<eModifiedUserFileColumns>();
        s.Criteria = sc;
        s.FieldName = colToSearch;
        s.Value = value;
        search.SearchFields = new[] { s };
        return search;
    }
   public override IOrderedQueryable<ModifiedUserFile> TransformToOrder(IQueryable<ModifiedUserFile> data){
        if(OrderBys == null || OrderBys.Length ==0){
            OrderBys =new GeneratorFromDB.OrderBy<eModifiedUserFileColumns>[1];
            OrderBys[0]= new GeneratorFromDB.OrderBy<eModifiedUserFileColumns>()
            {
                //maybe find PK ...
                FieldName = eModifiedUserFileColumns.IDUser,
                Asc=false
            };
        }
        var order = OrderBys[0]!;
        IOrderedQueryable<ModifiedUserFile> ret;
        //TODO: maybe utilize EF.Property ? 
        switch(order.FieldName){
                    case eModifiedUserFileColumns.IDUser:
                if(order.Asc)
                    ret = data.OrderBy(it=>it.IDUser);
                else
                    ret = data.OrderByDescending(it=>it.IDUser);
                
                break;

                    case eModifiedUserFileColumns.IDFile:
                if(order.Asc)
                    ret = data.OrderBy(it=>it.IDFile);
                else
                    ret = data.OrderByDescending(it=>it.IDFile);
                
                break;

                    case eModifiedUserFileColumns.ModifiedDate:
                if(order.Asc)
                    ret = data.OrderBy(it=>it.ModifiedDate);
                else
                    ret = data.OrderByDescending(it=>it.ModifiedDate);
                
                break;

                    case eModifiedUserFileColumns.Contents:
                if(order.Asc)
                    ret = data.OrderBy(it=>it.Contents);
                else
                    ret = data.OrderByDescending(it=>it.Contents);
                
                break;

                    default:
                throw new ArgumentException(" cannot order ModifiedUserFile by "+ order.FieldName);
            
        }
        for(var i=1;i<OrderBys.Length;i++){
            order=OrderBys[i];
            switch(order.FieldName){
                    case eModifiedUserFileColumns.IDUser:
                if(order.Asc)
                    ret = ret.ThenBy(it=>it.IDUser);
                else
                    ret = ret.ThenByDescending(it=>it.IDUser);
                
                break;
                    case eModifiedUserFileColumns.IDFile:
                if(order.Asc)
                    ret = ret.ThenBy(it=>it.IDFile);
                else
                    ret = ret.ThenByDescending(it=>it.IDFile);
                
                break;
                    case eModifiedUserFileColumns.ModifiedDate:
                if(order.Asc)
                    ret = ret.ThenBy(it=>it.ModifiedDate);
                else
                    ret = ret.ThenByDescending(it=>it.ModifiedDate);
                
                break;
                    case eModifiedUserFileColumns.Contents:
                if(order.Asc)
                    ret = ret.ThenBy(it=>it.Contents);
                else
                    ret = ret.ThenByDescending(it=>it.Contents);
                
                break;
                    default:
                throw new ArgumentException(" cannot order ModifiedUserFile by "+ order.FieldName);
            
        }
        }
        return ret;
        
    }
    public override  IQueryable<ModifiedUserFile> TransformToWhere(IQueryable<ModifiedUserFile> data){
        if(SearchFields == null || SearchFields.Length ==0)        
            return data;
        var returnValue = data;
        foreach(var s in SearchFields){
            switch(s.FieldName ){
                case eModifiedUserFileColumns.None :
                    continue;
                    
            case eModifiedUserFileColumns.IDUser:
                //long isNullable False
                if(s.Value == null)
        {
                            throw new ArgumentException("ModifiedUserFile.IDUser cannot be null");
                                }//end if s.value is null -search for null
        //if we are here, s.Value is not null
        { //use this to define value in smaller scope
                        var valueArray = s.Value
                    .Split(",", StringSplitOptions.RemoveEmptyEntries | StringSplitOptions.TrimEntries)
                    .Select(it=>long.Parse(it))
                    .ToArray();
                var value = valueArray[0];
                  
          
        switch(s.Criteria){

            case GeneratorFromDB.SearchCriteria.Between:
                if(valueArray?.Length != 2){
                    throw new ArgumentException("between must have 2 args, separated by comma => value is:" + s.Value);
                }
                                    returnValue =returnValue.Where(it=>it.IDUser >= valueArray[0] && it.IDUser <= valueArray[1]);
                  
                continue;
            case GeneratorFromDB.SearchCriteria.NotBetween:
            
            if(valueArray?.Length != 2){
                    throw new ArgumentException("not between must have 2 args, separated by comma => value is:" + s.Value);
                }
                                    returnValue =returnValue.Where(it=>it.IDUser < valueArray[0] || it.IDUser > valueArray[1]);
                  
                continue;
            case GeneratorFromDB.SearchCriteria.InArray:
                        returnValue =returnValue.Where(it=> valueArray!.Contains(it.IDUser));
                  
                continue;
            case GeneratorFromDB.SearchCriteria.NotInArray:
                        returnValue =returnValue.Where(it=> !valueArray!.Contains(it.IDUser));
                  
                continue;
            case GeneratorFromDB.SearchCriteria.Equal:
                returnValue =returnValue.Where(it=>it.IDUser==value);
                continue;
            case GeneratorFromDB.SearchCriteria.Different:
                returnValue =returnValue.Where(it=>it.IDUser!=value);
                continue;
            
            case GeneratorFromDB.SearchCriteria.Less:
                                                returnValue =returnValue.Where(it=>it.IDUser<value);
                                                
                        continue;
                    case GeneratorFromDB.SearchCriteria.LessOrEqual:
                                                
                        returnValue =returnValue.Where(it=>it.IDUser<=value);
                                                
                        continue;
                    case GeneratorFromDB.SearchCriteria.Greater:
                                                
                        returnValue =returnValue.Where(it=>it.IDUser>value);
                                                continue;
                    case GeneratorFromDB.SearchCriteria.GreaterOrEqual:
                                                returnValue =returnValue.Where(it=>it.IDUser>=value);
                                                continue;
                                                                        

            default:
                throw new ArgumentException($"not found Criteria {(int)s.Criteria} {s.Criteria} for {s.FieldName}");
        }//end switch after s.Criteria

                //continue;
        } //end use this to define value in smaller scope
            
                    
            case eModifiedUserFileColumns.IDFile:
                //long isNullable False
                if(s.Value == null)
        {
                            throw new ArgumentException("ModifiedUserFile.IDFile cannot be null");
                                }//end if s.value is null -search for null
        //if we are here, s.Value is not null
        { //use this to define value in smaller scope
                        var valueArray = s.Value
                    .Split(",", StringSplitOptions.RemoveEmptyEntries | StringSplitOptions.TrimEntries)
                    .Select(it=>long.Parse(it))
                    .ToArray();
                var value = valueArray[0];
                  
          
        switch(s.Criteria){

            case GeneratorFromDB.SearchCriteria.Between:
                if(valueArray?.Length != 2){
                    throw new ArgumentException("between must have 2 args, separated by comma => value is:" + s.Value);
                }
                                    returnValue =returnValue.Where(it=>it.IDFile >= valueArray[0] && it.IDFile <= valueArray[1]);
                  
                continue;
            case GeneratorFromDB.SearchCriteria.NotBetween:
            
            if(valueArray?.Length != 2){
                    throw new ArgumentException("not between must have 2 args, separated by comma => value is:" + s.Value);
                }
                                    returnValue =returnValue.Where(it=>it.IDFile < valueArray[0] || it.IDFile > valueArray[1]);
                  
                continue;
            case GeneratorFromDB.SearchCriteria.InArray:
                        returnValue =returnValue.Where(it=> valueArray!.Contains(it.IDFile));
                  
                continue;
            case GeneratorFromDB.SearchCriteria.NotInArray:
                        returnValue =returnValue.Where(it=> !valueArray!.Contains(it.IDFile));
                  
                continue;
            case GeneratorFromDB.SearchCriteria.Equal:
                returnValue =returnValue.Where(it=>it.IDFile==value);
                continue;
            case GeneratorFromDB.SearchCriteria.Different:
                returnValue =returnValue.Where(it=>it.IDFile!=value);
                continue;
            
            case GeneratorFromDB.SearchCriteria.Less:
                                                returnValue =returnValue.Where(it=>it.IDFile<value);
                                                
                        continue;
                    case GeneratorFromDB.SearchCriteria.LessOrEqual:
                                                
                        returnValue =returnValue.Where(it=>it.IDFile<=value);
                                                
                        continue;
                    case GeneratorFromDB.SearchCriteria.Greater:
                                                
                        returnValue =returnValue.Where(it=>it.IDFile>value);
                                                continue;
                    case GeneratorFromDB.SearchCriteria.GreaterOrEqual:
                                                returnValue =returnValue.Where(it=>it.IDFile>=value);
                                                continue;
                                                                        

            default:
                throw new ArgumentException($"not found Criteria {(int)s.Criteria} {s.Criteria} for {s.FieldName}");
        }//end switch after s.Criteria

                //continue;
        } //end use this to define value in smaller scope
            
                    
            case eModifiedUserFileColumns.ModifiedDate:
                //DateTime isNullable False
                if(s.Value == null)
        {
                            throw new ArgumentException("ModifiedUserFile.ModifiedDate cannot be null");
                                }//end if s.value is null -search for null
        //if we are here, s.Value is not null
        { //use this to define value in smaller scope
                        var valueArray = s.Value
                    .Split(",", StringSplitOptions.RemoveEmptyEntries | StringSplitOptions.TrimEntries)
                    .Select(it=>DateTime.Parse(it))
                    .ToArray();
                var value = valueArray[0];
                  
          
        switch(s.Criteria){

            case GeneratorFromDB.SearchCriteria.Between:
                if(valueArray?.Length != 2){
                    throw new ArgumentException("between must have 2 args, separated by comma => value is:" + s.Value);
                }
                                    returnValue =returnValue.Where(it=>it.ModifiedDate >= valueArray[0] && it.ModifiedDate <= valueArray[1]);
                  
                continue;
            case GeneratorFromDB.SearchCriteria.NotBetween:
            
            if(valueArray?.Length != 2){
                    throw new ArgumentException("not between must have 2 args, separated by comma => value is:" + s.Value);
                }
                                    returnValue =returnValue.Where(it=>it.ModifiedDate < valueArray[0] || it.ModifiedDate > valueArray[1]);
                  
                continue;
            case GeneratorFromDB.SearchCriteria.InArray:
                        returnValue =returnValue.Where(it=> valueArray!.Contains(it.ModifiedDate));
                  
                continue;
            case GeneratorFromDB.SearchCriteria.NotInArray:
                        returnValue =returnValue.Where(it=> !valueArray!.Contains(it.ModifiedDate));
                  
                continue;
            case GeneratorFromDB.SearchCriteria.Equal:
                returnValue =returnValue.Where(it=>it.ModifiedDate==value);
                continue;
            case GeneratorFromDB.SearchCriteria.Different:
                returnValue =returnValue.Where(it=>it.ModifiedDate!=value);
                continue;
            
            case GeneratorFromDB.SearchCriteria.Less:
                                                returnValue =returnValue.Where(it=>it.ModifiedDate<value);
                                                
                        continue;
                    case GeneratorFromDB.SearchCriteria.LessOrEqual:
                                                
                        returnValue =returnValue.Where(it=>it.ModifiedDate<=value);
                                                
                        continue;
                    case GeneratorFromDB.SearchCriteria.Greater:
                                                
                        returnValue =returnValue.Where(it=>it.ModifiedDate>value);
                                                continue;
                    case GeneratorFromDB.SearchCriteria.GreaterOrEqual:
                                                returnValue =returnValue.Where(it=>it.ModifiedDate>=value);
                                                continue;
                                                case GeneratorFromDB.SearchCriteria.EqualYear:
            {//for variable year
                var year=  value.Year;
                var yearStart=new DateTime(year,1,1);
                var yearEnd=new DateTime(year+1,1,1);
                returnValue =returnValue.Where(it=>it.ModifiedDate>=yearStart && it.ModifiedDate<yearEnd);
                }//end for variable year
                continue;
            case GeneratorFromDB.SearchCriteria.DifferentYear:
            {//for variable year
                var year=  value.Year;
                var yearStart=new DateTime(year,1,1);
                var yearEnd=new DateTime(year+1,1,1);
                returnValue =returnValue.Where(it=>it.ModifiedDate<yearStart || it.ModifiedDate>=yearEnd);
                }//end for variable year
                continue;
            case GeneratorFromDB.SearchCriteria.GreaterYear:
            {//for variable year
                var year=  value.Year;
                
                var yearStart=new DateTime(year+1,1,1);
                returnValue =returnValue.Where(it=>it.ModifiedDate > yearStart);
                }//end for variable year
                continue;
            case GeneratorFromDB.SearchCriteria.GreaterOrEqualYear:
            {//for variable year
                var year=  value.Year;
                
                var yearStart=new DateTime(year,1,1);
                returnValue =returnValue.Where(it=>it.ModifiedDate > yearStart);
                }//end for variable year
                continue;
                    
            case GeneratorFromDB.SearchCriteria.LessYear:
            {//for variable year
                var year=  value.Year;
                
                var yearEnd=new DateTime(year,1,1).AddMicroseconds(-1);
                returnValue =returnValue.Where(it=>it.ModifiedDate <= yearEnd);
                }//end for variable year
                continue;
            case GeneratorFromDB.SearchCriteria.LessOrEqualYear:
            {//for variable year
                var year=  value.Year;
                
                var yearEnd=new DateTime(year+1,1,1).AddMicroseconds(-1);
                returnValue =returnValue.Where(it=>it.ModifiedDate <= yearEnd);
                }//end for variable year
                continue;

                                                

            default:
                throw new ArgumentException($"not found Criteria {(int)s.Criteria} {s.Criteria} for {s.FieldName}");
        }//end switch after s.Criteria

                //continue;
        } //end use this to define value in smaller scope
            
                }//end switch  
       }//end foreach
    return returnValue;
    //throw new NotImplementedException("not");
    }

    public long IDUser { get; set; }

    public long IDFile { get; set; }

    public DateTime ModifiedDate { get; set; }

    public byte[] Contents { get; set; } = null!;

    //[ForeignKey("IDFile")]
    //[InverseProperty("ModifiedUserFile")]
    // public virtual ModifiedFile IDFileNavigation { get; set; } = null!;

    //[ForeignKey("IDUser")]
    //[InverseProperty("ModifiedUserFile")]
    // public virtual ModifiedUser IDUserNavigation { get; set; } = null!;
}
